{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["$(document).ready(function () {\n    $('.datePicker').datepicker({\n        format: \"yyyy-mm-dd\",\n        autoclose: true,\n        clearBtn: true,\n        language: 'es',\n    });\n    if($('#formularioDeReserva').length>=1) {\n        $.ajaxSetup({\n            headers: {\n                'X-XSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n\n        $(window).keydown(function (event) {\n            if (event.keyCode == 13) {\n                event.preventDefault();\n                return false;\n            }\n        });\n\n        $('#incio').on('slide.bs.carousel', function (e) {\n            console.log(e.relatedTarget);\n        });\n        if ($('input[name=\"errores\"]').length == 1) {\n            $(\"#ayudaIdentificacion, #ayudaEmbarcacion, #ayudaPaseo, #ayudaFecha, #tipoEmbarcacion, #fechaform, #horaform, #cedulaForm, #nombresForm, #apellidosForm, #emailForm, #telefonoForm, #datosdePrecios, #datosdeCupos, #SaldosyMontos, #groupcondiciones,#botonEnviarForm\").slideDown('fast');\n            $('.loading,.alert.alert-success').slideUp('slow');\n            $(\"input[name='embarcacion_id']:checked\").parent().addClass('active');\n            $(\"input[name='paseo_id']\").parent().removeClass('disabled hidden');\n            $(\"input[name='paseo_id']:checked\").parent().addClass('active');\n            if ($(\"input[name='fecha']\").val().length > 0) {\n                $.get(\"../ObtenerVariables/\" + $(\"input[name='fecha']\").val(), function (datosconfecha) {\n\n                    window.datosconfecha = datosconfecha;\n                    cantidad_en_embarcacion = [];\n                    for (key in window.datosconfecha.pasajeros) {\n                        cantidad_en_embarcacion[key] = parseInt(0);\n                        for (key2 in window.datosconfecha.pasajeros[key]) {\n                            cantidad_en_embarcacion[key] = cantidad_en_embarcacion[key] + window.datosconfecha.pasajeros[key][key2].disponibles;\n                        }\n                        if (cantidad_en_embarcacion[key] > 0) {\n                            $(\"input[name='embarcacion_id'][value=\" + key + \"]\").parent().removeClass('disabled hidden');\n                        }\n                    }\n                    $('#fechaform').children('.col-xs-1').children().slideUp('slow');\n                    if ($(\"input[name='embarcacion_id']\").is(\":checked\")) {\n                        embarcacion_id_seleccionada = $(\"input[name='embarcacion_id']:checked\").val();\n                        for (key in window.datosconfecha.pasajeros[embarcacion_id_seleccionada]) {\n                            if (window.datosconfecha.pasajeros[embarcacion_id_seleccionada][key].disponibles > 0) {\n                                $(\"input[name='paseo_id'][value=\" + key + \"]\").siblings('.cupos').html(window.datosconfecha.pasajeros[embarcacion_id_seleccionada][key].disponibles + ' Pasaje(s)</br> Disponibles').parent().removeClass('disabled hidden');\n                            }\n\n                        }\n                        if ($(\"input[name='paseo_id']\").is(\":checked\")) {\n                            paseo_id_seleccionada = $(\"input[name='paseo_id']:checked\").val();\n                            $('span#precioAdultos').text(window.datosconfecha.precios[paseo_id_seleccionada][0].adulto + ' Bs');\n                            $('#precioMayores').text(window.datosconfecha.precios[paseo_id_seleccionada][0].mayor + ' Bs');\n                            $('#precioNinos').text(window.datosconfecha.precios[paseo_id_seleccionada][0].nino + ' Bs');\n                        }\n                        else {\n                            $('#ayudaPaseo').slideDown('slow');\n                        }\n                    }\n                    else {\n                        $('#ayudaEmbarcacion').slideDown('slow');\n                    }\n\n                });\n            }\n\n\n        }\n        $.get(\"../ObtenerVariables\", function (datos) {\n            // console.info('prueba');\n            window.diasNoLaborables = datos.diasNoLaborables;\n            window.minimoDiasAReservar = datos.minReservar;\n            window.fechasEspeciales = datos.fechasEspeciales;\n            window.temporadaBaja = datos.temporadaBaja;\n            if ($(\"input[name='fecha']\").val().length == 0) {\n                $('#ayudaFecha').slideDown('slow');\n            }\n            $('#fechaform').slideDown('slow');\n            $('#loadingFormulario').slideUp('slow');\n            $('#fecha2').datepicker({\n                format: \"DD, d MM , yyyy\",\n                autoclose: true,\n                clearBtn: true,\n                // daysOfWeekDisabled: window.diasNoLaborables,\n                language: 'es',\n                startDate:new Date(),\n                beforeShowDay: fechasEspecialesx,\n                altField: \"#fecha\",\n                todayBtn:true,\n                todayHighlight:true,\n                altFormat: \"yy-mm-dd\"\n\n            }).on('changeDate', function (e) {\n                $('#tipoEmbarcacion').slideUp('slow');\n                $('#ayudaEmbarcacion').slideUp('slow');\n                $('#datosdePrecios').slideUp('slow');\n\n                $('#horaform').slideUp('slow');\n                $('#ayudaFecha').slideUp('slow');\n                $('.loading').slideDown('slow');\n                $(\"input[name='embarcacion_id']\").removeAttr('checked').parent().removeClass('active').addClass('hidden disabled');\n                $(\"input[name='paseo_id']\").removeAttr('checked').siblings('.cupos').html('').parent().removeClass('active').addClass('disabled hidden')\n                $('#fechaform').children('.col-xs-1').children().slideDown('slow');\n                $('#fecha').val((e.format(0, 'yyyy-mm-dd')));\n                $.get(\"../ObtenerVariables/\" + e.format(0, 'yyyy-mm-dd'), function (datosconfecha) {\n                    console.info(datosconfecha);\n                    window.datosconfecha = datosconfecha;\n                    cantidad_en_embarcacion = [];\n                    for (key in window.datosconfecha.pasajeros) {\n                        cantidad_en_embarcacion[key] = parseInt(0);\n                        for (key2 in window.datosconfecha.pasajeros[key]) {\n                            cantidad_en_embarcacion[key] = cantidad_en_embarcacion[key] + window.datosconfecha.pasajeros[key][key2].disponibles;\n                        }\n                        var $cantidadEmbarcaciones=Object.keys(window.datosconfecha.embarcaciones).length,\n                        $anchoEmbarcaciones=Math.floor(12/$cantidadPaseos);\n                        if (cantidad_en_embarcacion[key] > 0) {\n                            $(\"input[name='embarcacion_id'][value=\" + key + \"]\").parent().removeClass('disabled hidden').addClass('col-sm-'+$anchoEmbarcaciones);\n                        }\n                    }\n                    $('#fechaform').children('.col-xs-1').children().slideUp('slow');\n                    $('.loading').slideUp('slow');\n\n                    $('#tipoEmbarcacion,#ayudaEmbarcacion').slideDown('slow');\n                });\n            });\n        }, \"json\");\n        $(\"input[name='embarcacion_id']\").on(\"change\", function () {\n            embarcacion_id_seleccionada = $(\"input[name='embarcacion_id']:checked\").val();\n            // var $cantidadPaseos=Object.keys(window.datosconfecha.paseos).length,\n             // $anchoPaseos=Math.floor(12/$cantidadPaseos);\n            $(\"input[name='paseo_id']\").removeAttr('checked').parent().removeClass('active').addClass('disabled hidden');\n            for (key in window.datosconfecha.pasajeros[embarcacion_id_seleccionada]) {\n                if (window.datosconfecha.pasajeros[embarcacion_id_seleccionada][key].disponibles > 0) {\n                    $(\"input[name='paseo_id'][value=\" + key + \"]\").siblings('.cupos').html(window.datosconfecha.pasajeros[embarcacion_id_seleccionada][key].disponibles + ' Pasaje(s)</br> Disponibles').parent().removeClass('disabled hidden');\n                }\n            }\n            $('#ayudaEmbarcacion').slideUp('slow');\n            $('#horaform,#ayudaPaseo').slideDown('slow');\n        });\n        $(\"input[name='paseo_id']\").on(\"change\", function () {\n            paseo_id_seleccionada = $(\"input[name='paseo_id']:checked\").val();\n            window.disponible = window.datosconfecha.pasajeros[embarcacion_id_seleccionada][paseo_id_seleccionada].disponibles;\n            $('#ayudaPaseo').slideUp('slow');\n            $('span#precioAdultos').text(window.datosconfecha.precios[paseo_id_seleccionada][0].adulto + ' Bs');\n            $('#precioMayores').text(window.datosconfecha.precios[paseo_id_seleccionada][0].mayor + ' Bs');\n            $('#precioNinos').text(window.datosconfecha.precios[paseo_id_seleccionada][0].nino + ' Bs');\n            $('#datosdePrecios').slideDown('slow');\n            $('#cedulaForm').slideDown('slow');\n\n            if ($(\"input[name='identificacion_number']\").val() == '') {\n                $('#ayudaIdentificacion').slideDown('slow');\n            }\n        });\n        $('#validarId').on('click', function () {\n            $('input[name=\"identificacion\"]').val($('select[name=\"rifInicio\"]').val() + \"-\" + $(\"input[name='identificacion_number']\").val());\n            $('#validarId').children('.glyphicon').removeClass('glyphicon-ok').addClass('glyphicon-refresh glyphicon-refresh-animate');\n            $('#advertencias').modal('show');\n            $.get(\"../ObtenerDatosClientes/\" + $('[name=\"identificacion\"]').val(), function (datosCliente) {\n\n                window.datosCliente = datosCliente;\n                $('#nombre').val(datosCliente.nombre);\n                $('#apellido').val(datosCliente.apellido);\n                $('#email').val(datosCliente.email);\n                $('#telefono').val(datosCliente.telefono);\n                $('.datosInternosCliente').slideDown('slow');\n                $('#ayudaIdentificacion').slideUp('slow');\n                $('.datosInternosCliente').slideDown('slow', function () {\n                    $('#datosdeCupos').slideDown('slow');\n                });\n                $('#validarId').children('.glyphicon').addClass('glyphicon-ok').removeClass('glyphicon-refresh glyphicon-refresh-animate');\n\n            });\n        });\n        $('.numeroDeCupos').change(function (event) {\n            paseo_id_seleccionada = $(\"input[name='paseo_id']:checked\").val();\n            pasajesAdultos = parseInt($('#pasajesadultos').val()) || 0;\n            pasajesMayores = parseInt($('#3eraEdad').val()) || 0;\n            pasajesNinos = parseInt($('#ninos').val()) || 0;\n            actual = parseInt($(this).val()) || 0;\n            if (pasajesAdultos + pasajesMayores == 0) {\n                $('#ninos').val(0);\n            }\n            totalPasajes = pasajesAdultos + pasajesMayores + pasajesNinos;\n            maximoActual = window.disponible - totalPasajes + actual;\n            $('.numeroDeCupos').attr('max', maximoActual);\n            if (totalPasajes >= (window.disponible + 1)) {\n                $(this).val(0);\n            }\n            precioAdultos = window.datosconfecha.precios[paseo_id_seleccionada][0].adulto;\n            precioMayor = window.datosconfecha.precios[paseo_id_seleccionada][0].mayor;\n            precioNino = window.datosconfecha.precios[paseo_id_seleccionada][0].nino;\n            totalReserva = (pasajesAdultos * precioAdultos) + (pasajesMayores * precioMayor) + (pasajesNinos * precioNino);\n            saldoAFavor = window.datosCliente.credito;\n            montoAPagar = (totalReserva <= saldoAFavor) ? 0 : totalReserva - saldoAFavor;\n            $('#Giftcards').html(saldoAFavor + ' Bs.');\n            $('#totalReserva').html(totalReserva + ' Bs.');\n            $('#PrecioTotal').html(montoAPagar + ' Bs.');\n\n        });\n        $('#validarCupos').on('click', function () {\n            pasajesAdultos = parseInt($('#pasajesadultos').val()) || 0;\n            pasajesMayores = parseInt($('#3eraEdad').val()) || 0;\n            pasajesNinos = parseInt($('#ninos').val()) || 0;\n            pasajes = pasajesAdultos + pasajesMayores + pasajesNinos;\n            if (pasajes > 0) {\n                $('#ayudaNombres,#ayudaCupos').slideUp('slow');\n                $('#SaldosyMontos,#groupcondiciones').slideDown('slow');\n                if ($('#condiciones').is(':checked')) {\n                    $('#botonEnviarForm').slideDown('slow');\n                }\n            }\n            else {\n\n            }\n        });\n        $('#condiciones').on('click', function () {\n\n            if ($('#condiciones').is(':checked')) {\n                $('#botonEnviarForm').slideDown('slow');\n            }\n            else {\n                $('#botonEnviarForm').slideUp('slow');\n            }\n        })\n    }\n    if($('#consultarReserva').length>=1){\n        $('#fecha2').datepicker({\n            format: \"DD, d MM , yyyy\",\n            autoclose: true,\n            clearBtn: true,\n            language: 'es',\n            altField: \"#fecha\",\n            altFormat: \"yy-mm-dd\",\n            todayBtn:true,\n            todayHighlight:true\n        }).on('changeDate', function (e) {\n            $('#fecha').val((e.format(0, 'yyyy-mm-dd')));\n\n        });\n    }\n    $(\".btswitch\").bootstrapSwitch();\n    $('[multiple]').select2();\n\n});\nfunction fechasEspecialesx(fechaAComparar) {\n\n    var fechasEspeciales = window.fechasEspeciales;\n    var Mes = fechaAComparar.getMonth();\n    var Dia = fechaAComparar.getDate();\n    var Ano = fechaAComparar.getFullYear();\n    var $respuesta;\n    // console.log(fechaAComparar);\n    diaDeLaSemana=fechaAComparar.getDay().toString();\n    // console.log(window.diasNoLaborables);\n    respuesta={};\n    respuesta.enabled= false;\n    if(window.diasNoLaborables.indexOf(diaDeLaSemana)==-1){\n        // console.log(diaDeLaSemana);\n        respuesta.enabled= true;\n    }\n    // return respuesta;\n    for (i = 0; i < fechasEspeciales.length; i++) {\n\n        var fechaEspecial = new Date(fechasEspeciales[i].fecha.date);\n        // console.info('Probando si fecha '+fechaEspecial+' es especial al compararla con '+fechaAComparar );\n        \n        if(+fechaEspecial===+fechaAComparar){\n            console.log('fechaEncontrada');\n            respuesta.enabled=false;\n            respuesta.classes= fechasEspeciales[i].clase;\n            respuesta.tooltip= fechasEspeciales[i].descripcion;\n            for (var property in fechasEspeciales[i].Embarcaciones) {\n                if (fechasEspeciales[i].Embarcaciones[property] == 1) {\n                    respuesta.enabled= true;\n                }               \n            }\n            return respuesta;\n        }\n    }\n    return respuesta;\n}"]}